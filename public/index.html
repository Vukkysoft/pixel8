<!DOCTYPE html>
<html>
    <head>
        <title>pixel8.vukky.net</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="noindex">
        <style>
            .icon {
                image-rendering: pixelated;
                cursor: pointer;
            }
            textarea {
                resize: none;
            }
        </style>
        <script src="/pixel8.js" defer></script>
    </head>
    <body>
        <h1>pixel8<small style="font-size: 12px;">.vukky.net</small></h1>
        <p><i class="p8-fugue p8-image-share"></i> I got tired of searching for pixel icons online, so this is a simple search tool that combines various icon packs into one search.</p>
        <p><b><i class="p8-fatcow-16 p8-image_link"></i> Do not hotlink these icons. Please download them yourself.<br><i class="p8-fatcow-16 p8-emotion_shocked"></i> Also, some icons may be offensive or inappropiate.</b></p>
        <i class="p8-fatcow-16 p8-report_magnify"></i> Search the library: <input id="search" value="Loading..." oninput="showIcon(this.value)" disabled><br><br>
        <i class="p8-fugue p8-eye--arrow"></i> See your results: <span id="rawr"></span>

        <h2><i class="p8-fatcow-32 p8-books"></i> Licensing</h2>
        <p>This project uses icons from the following icon packs.<br>Please note that I am not affiliated with these websites.<br><b>When you use an icon, you must follow the licenses below for the respective pack.</b></p>
        <ul>
            <li><a href="https://p.yusukekamiyamane.com/">Fugue 3.5.6 by Yusuke Kamiyamane</a>, licensed under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a> (no-attribution license available for <a href="https://p.yusukekamiyamane.com/icons/license/">$69.95 USD</a>)</li>
            <li><a href="https://p.yusukekamiyamane.com/">Diagona 1.0.0 by Yusuke Kamiyamane</a>, licensed under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a> (no-attribution license available for <a href="https://p.yusukekamiyamane.com/icons/license/">$9.95 USD</a>)</li>
            <li><a href="https://www.fatcow.com/free-icons">"Farm-Fresh Web Icons" 3.9.2 by FatCow</a>, licensed under <a href="https://creativecommons.org/licenses/by/3.0/us/">CC BY 3.0 US</a></a></li>
            <li><a href="https://web.archive.org/web/20221129102416/http://www.famfamfam.com/lab/icons/silk/">Silk 1.3 by Mark James</a>, licensed under <a href="https://creativecommons.org/licenses/by/2.5/">CC BY 2.5</a> and <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></li>
            <li><a href="https://web.archive.org/web/20221123224916/http://www.famfamfam.com/lab/icons/mini/">Mini by Mark James</a>, no restrictions on use</li>
            <li><a href="https://web.archive.org/web/20221130133606/http://www.famfamfam.com/lab/icons/flags/">Flags by Mark James</a>, no restrictions on use</li>
            <li><a href="https://web.archive.org/web/20221224123303/http://www.famfamfam.com/lab/icons/mint/">Mint 1.0 by Mark James</a>, licensed under <a href="https://creativecommons.org/licenses/by/2.5/">CC BY 2.5</a></li>
            <li><a href="https://github.com/damieng/silk-companion">Silk-Companion by Damien Guard</a>, based on Silk by Mark James, licensed under <a href="https://creativecommons.org/licenses/by/2.5/">CC BY 2.5</a> and <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></li>
        </ul>

        <h2><i class="p8-fatcow-32 p8-script_link"></i> Script</h2>
        <p><i class="p8-fatcow-16 p8-html"></i> You can use the pixel8 script to automatically insert icons from HTML tags.<br><i class="p8-fugue p8-clipboard-block"></i> These tags can be copied by clicking on the icons you've searched for.<br><i class="p8-fatcow-16 p8-script_torn"></i> At this time, the script will not detect icons added after the page has loaded. You will need to use the <code>p8()</code> function to reload all icons.</p</p>
        <p><b>Please remember to follow the respective pack's license when using icons.</b></p>
        <p><i class="p8-fugue p8-download-cloud"></i> To use the pixel8 script, place <textarea rows="1" cols="90"><script defer src="https://cdn.jsdelivr.net/gh/vukkysoft/pixel/public/pixel8.js"></script></textarea> in your &lt;head&gt;.<br><i class="p8-fugue p8-tick"></i> Any &lt;i&gt; tags you've copied from pixel8 should load automatically after you have added the script.<br><i class="p8-fatcow-16 p8-internet_explorer"></i> It is not supported on very old browsers like IE and Chrome 44 or below. Please download icons manually if this is required.</p>
        <script src="https://unpkg.com/@popperjs/core@2"></script>
        <script src="https://unpkg.com/tippy.js@6"></script>
        <script src="//unpkg.com/string-similarity/umd/string-similarity.min.js"></script>
        <script>
            tippy.delegate("body", {
                "target": ".icon",
                "allowHTML": true
            })

            let iconArray;
            async function fetchIcons() {
                await fetch("/assets/icons.json").then(res => res.json()).then(res => iconArray = res.icons)
                document.querySelector("#search").disabled = false;
                document.querySelector("#search").value = "";
            }
            function findIcon(searchName) {
                let resultArray = [];
                iconArray.forEach(icon => {
                    let similarityScore = stringSimilarity.compareTwoStrings(icon.name.toLowerCase(), searchName.toLowerCase())
                    resultArray.push({ name: icon.name, path: icon.path, pack: icon.pack, score: similarityScore })
                })
                resultArray.sort((a, b) => b.score - a.score);
                return resultArray.slice(0, 100)
            }
            function showIcon(searchName) {
                if (searchName.toLowerCase() == "something similar" || searchName.toLowerCase() == "something similar.") return document.querySelector("#rawr").innerText = "Haha, very clever.";
                let results = findIcon(searchName);
                let resultString = "";
                results.forEach((result, index) => {
                    if (result.score > 0.2) resultString += `<img class="icon" src="${result.path}" onclick="copyToClipboard('${result.pack}', '${result.name}')" data-tippy-content="<img src='${result.path}' class='icon' width='32'> <b>${result.name}</b> (${result.pack})">`
                })
                document.querySelector("#rawr").innerHTML = resultString || "<i>No icon could be found for your search. Try being more specific, or search something similar.</i>";
                tippy.hideAll();
            }
            function copyToClipboard(iconPack, iconName) {
                navigator.clipboard.writeText(`<i class="p8-${iconPack} p8-${iconName}"></i>`);
                alert("Copied HTML to the clipboard. You can use this with the pixel8 script.");
            }
            fetchIcons();

            window.addEventListener("keypress", function(e) {
                if(document.querySelector("#search:focus")) return;
                document.querySelector("#search").value += e.key;
                document.querySelector("#search").focus();
            })
            window.addEventListener("keydown", function(e) {
                if(document.querySelector("#search:focus")) return;
                if(e.key == "Backspace") {
                    document.querySelector("#search").focus();
                }
            })
        </script>
    </body>
</html>